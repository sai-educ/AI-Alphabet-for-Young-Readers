<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz & Certificate ¬∑ AI Alphabet</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800;900&family=Inter:wght@400;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <style>
    .quiz-wrap {
      max-width: 900px;
      margin: 0 auto;
    }

    .progress-bar {
      height: 10px;
      background: #eef2ff;
      border-radius: 5px;
      margin: 2rem 0;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: #6c63ff;
      width: 0%;
      transition: width 0.3s ease;
    }

    .question-card {
      background: #fff;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      text-align: center;
    }

    .q-text {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 1.5rem;
    }

    .options-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: 1fr 1fr;
    }

    .option-btn {
      padding: 1rem;
      border: 2px solid #eef2ff;
      border-radius: 12px;
      background: #fff;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      touch-action: manipulation;
      min-height: 44px;
    }

    .option-btn:hover {
      border-color: #6c63ff;
      background: #f0f4ff;
    }

    .option-btn.selected {
      background: #6c63ff;
      color: #fff;
      border-color: #6c63ff;
    }

    .input-answer {
      font-size: 1.2rem;
      padding: 0.8rem;
      border-radius: 12px;
      border: 2px solid #d7def5;
      width: 80%;
      margin-bottom: 1rem;
      text-align: center;
    }

    /* Dashboard Styles */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-top: 2rem;
    }

    .dash-card {
      background: #fff;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: var(--shadow);
    }

    .topic-bar {
      margin-bottom: 1.2rem;
    }

    .topic-label {
      display: flex;
      justify-content: space-between;
      font-weight: 700;
      margin-bottom: 0.4rem;
      font-size: 0.9rem;
    }

    .t-progress {
      height: 8px;
      background: #f0f4f8;
      border-radius: 4px;
      overflow: hidden;
    }

    .t-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s ease;
    }

    .cert-preview {
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      margin: 1rem 0;
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      .options-grid {
        grid-template-columns: 1fr;
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #dashboard-section {
      animation: slideUp 0.5s ease;
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header" role="banner">
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="index.html"><span class="brand-badge" aria-hidden="true">AI</span><span
          class="brand-text">AI Alphabet</span></a>
      <ul id="nav-menu" class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="learn.html">Learn</a></li>
        <li><a class="active" href="quiz.html">Quiz</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </nav>
  </header>

  <main id="main" class="wrap">

    <!-- Quiz Section -->
    <div id="quiz-section" style="max-width: 700px; margin: 0 auto;">
      <header class="page-head">
        <h1>AI Master Quiz</h1>
        <p class="muted">Answer 15 questions to earn your certificate!</p>
      </header>

      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>
      <p style="font-weight:700; color:var(--brand); text-align:center;">Question <span id="q-num">1</span> of 15</p>

      <div class="question-card">
        <div class="q-text" id="question">Loading...</div>
        <div id="options-area"></div>
        <div id="input-area" class="hidden">
          <input type="text" id="text-input" class="input-answer" placeholder="Type your answer..." autocomplete="off">
          <br>
          <button id="submit-text" class="btn btn-primary">Submit</button>
        </div>
      </div>
      <div id="feedback" style="height: 2rem; font-weight: 800; text-align:center;"></div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard-section" class="hidden">
      <header class="page-head">
        <h1>üéâ Amazing Job!</h1>
        <p class="muted">You scored <span id="final-score"></span>/15. Check out your learning profile below.</p>
      </header>

      <div class="dashboard-grid">
        <!-- Left: Certificate -->
        <div class="dash-card" style="text-align:center;">
          <h2 style="margin-top:0;">üéì Get Certificate</h2>
          <p class="muted">Enter your name to make it official.</p>

          <div id="cert-form">
            <label for="student-name" class="sr-only">Your Name</label>
            <input type="text" id="student-name" class="input-answer" placeholder="Your Name" style="width:100%;">
            <br>
            <button id="gen-btn" class="btn btn-primary btn-large" style="width:100%;">Generate ‚ú®</button>
          </div>

          <div id="cert-display" class="hidden">
            <canvas id="cert-canvas" width="800" height="600" style="display:none;"></canvas>
            <img id="cert-img" class="cert-preview" alt="Your Certificate">
            <a id="download-link" class="btn btn-primary" download="AI-Master-Certificate.png"
              style="width:100%;">Download Image ‚¨áÔ∏è</a>
          </div>
        </div>

        <!-- Right: Analytics -->
        <div class="dash-card">
          <h2 style="margin-top:0;">üìä Learning Profile</h2>
          <p class="muted">Here is how you did on each topic:</p>
          <div id="topic-stats"></div>

          <div style="margin-top: 2rem; padding: 1rem; background: #f8fafc; border-radius: 12px;">
            <h4 style="margin:0 0 0.5rem;">üí° Recommendation:</h4>
            <p id="recommendation" style="font-size: 0.95rem; margin:0; color:var(--muted);">Great work! You are ready
              to teach others.</p>
          </div>
          <div style="margin-top: 1.5rem; text-align:center;">
            <button onclick="location.reload()" class="btn btn-ghost">Take Quiz Again</button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>¬© 2025 AI Alphabet for Young Readers</p>
      <p>Adapted from a carefully crafted <a class="footer-link"
          href="https://docs.google.com/presentation/d/1BxJaOYBW1A5cs4-DLyNE5N7zLWx_gFYAHP5u5hQuBf0/edit?usp=sharing"
          target="_blank" rel="noopener">Google Slides document</a>.</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // Topics: Core, Ethics, Tech, Logic
    const QUESTIONS = [
      { q: "What does 'A' stand for in our alphabet?", a: "ALGORITHM", type: "text", topic: "Core Concepts" },
      { q: "A 'Bot' is short for what word?", a: "ROBOT", type: "text", topic: "Tech & Tools" },
      { q: "Which of these is a coding language?", options: ["Snake", "Python", "Lizard", "Turtle"], a: "Python", type: "choice", topic: "Coding & Logic" },
      { q: "Data is used by computers to learn...", options: ["Magic Tricks", "Patterns", "Cooking", "Dancing"], a: "Patterns", type: "choice", topic: "Core Concepts" },
      { q: "Ethics is about knowing right from...", a: "WRONG", type: "text", topic: "Ethics & Safety" },
      { q: "A video that looks real but is made by AI is called a...", options: ["Deepfake", "Photoshop", "Glitch", "Selfie"], a: "Deepfake", type: "choice", topic: "Ethics & Safety" },
      { q: "When a game freezes or acts weird, it's called a...", a: "GLITCH", type: "text", topic: "Tech & Tools" },
      { q: "When AI makes up a wrong answer, it is...", options: ["Dreaming", "Hallucinating", "Lying", "Joking"], a: "Hallucinating", type: "choice", topic: "Ethics & Safety" },
      { q: "The massive network connecting devices globally is the...", a: "INTERNET", type: "text", topic: "Tech & Tools" },
      { q: "AI is good at calculation, but humans are good at...", options: ["Judgement", "Math", "Sleeping", "Charging"], a: "Judgement", type: "choice", topic: "Ethics & Safety" },
      { q: "To find something online, you type a...", options: ["Password", "Keyword", "Secret", "Code"], a: "Keyword", type: "choice", topic: "Coding & Logic" },
      { q: "Machine Learning helps computers learn from...", options: ["Books", "Examples", "Teachers", "Videos"], a: "Examples", type: "choice", topic: "Core Concepts" },
      { q: "A Neural Network mimics which human organ?", a: "BRAIN", type: "text", topic: "Core Concepts" },
      { q: "What is the input you give to an AI called?", a: "PROMPT", type: "text", topic: "Tech & Tools" },
      { q: "Binary code is made of Zeroes and...", a: "ONES", type: "text", topic: "Coding & Logic" }
    ];

    let currentIdx = 0;
    let score = 0;
    let topicStats = {
      "Core Concepts": { total: 0, correct: 0 },
      "Ethics & Safety": { total: 0, correct: 0 },
      "Tech & Tools": { total: 0, correct: 0 },
      "Coding & Logic": { total: 0, correct: 0 }
    };

    const els = {
      quizSec: document.getElementById('quiz-section'),
      dashSec: document.getElementById('dashboard-section'),
      qText: document.getElementById('question'),
      opts: document.getElementById('options-area'),
      inpArea: document.getElementById('input-area'),
      txtInp: document.getElementById('text-input'),
      subBtn: document.getElementById('submit-text'),
      prog: document.getElementById('progress'),
      qNum: document.getElementById('q-num'),
      feed: document.getElementById('feedback'),
      finalScore: document.getElementById('final-score'),
      nameInp: document.getElementById('student-name'),
      genBtn: document.getElementById('gen-btn'),
      canvas: document.getElementById('cert-canvas'),
      img: document.getElementById('cert-img'),
      dlLink: document.getElementById('download-link'),
      certForm: document.getElementById('cert-form'),
      certDisplay: document.getElementById('cert-display'),
      topicStats: document.getElementById('topic-stats'),
      rec: document.getElementById('recommendation')
    };

    function init() {
      // Initialize stats
      QUESTIONS.forEach(q => {
        if (topicStats[q.topic]) topicStats[q.topic].total++;
      });
      renderQuestion();
    }

    function renderQuestion() {
      const q = QUESTIONS[currentIdx];
      els.qText.textContent = q.q;
      els.qNum.textContent = currentIdx + 1;
      els.prog.style.width = ((currentIdx) / QUESTIONS.length * 100) + '%';
      els.feed.textContent = '';

      els.opts.innerHTML = '';
      els.inpArea.classList.add('hidden');
      els.txtInp.value = '';

      if (q.type === 'choice') {
        els.opts.classList.remove('hidden');
        q.options.forEach(opt => {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.textContent = opt;
          btn.onclick = () => check(opt);
          els.opts.appendChild(btn);
        });
      } else {
        els.inpArea.classList.remove('hidden');
        els.txtInp.focus();
      }
    }

    els.subBtn.onclick = () => check(els.txtInp.value);
    els.txtInp.addEventListener('keydown', (e) => { if (e.key === 'Enter') check(els.txtInp.value); });

    function check(ans) {
      const q = QUESTIONS[currentIdx];
      const isCorrect = ans.trim().toUpperCase() === q.a.toUpperCase();

      if (isCorrect) {
        score++;
        topicStats[q.topic].correct++;
        els.feed.style.color = '#18a558';
        els.feed.textContent = 'Correct! üéâ';
        confetti({ particleCount: 50, spread: 60, origin: { y: 0.7 } });
      } else {
        els.feed.style.color = '#f04a5b';
        els.feed.textContent = `Oops! The answer was ${q.a}`;
      }

      setTimeout(() => {
        currentIdx++;
        if (currentIdx < QUESTIONS.length) {
          renderQuestion();
        } else {
          finishQuiz();
        }
      }, 1500);
    }

    function finishQuiz() {
      els.quizSec.classList.add('hidden');
      els.dashSec.classList.remove('hidden');
      els.finalScore.textContent = score;
      renderAnalytics();
      confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
    }

    function renderAnalytics() {
      els.topicStats.innerHTML = '';
      let weakTopics = [];

      for (const [topic, data] of Object.entries(topicStats)) {
        if (data.total === 0) continue;
        const pct = Math.round((data.correct / data.total) * 100);
        let color = '#18a558'; // Green
        if (pct < 50) { color = '#f04a5b'; weakTopics.push(topic); } // Red
        else if (pct < 80) { color = '#ffb703'; } // Yellow

        const html = `
          <div class="topic-bar">
            <div class="topic-label">
              <span>${topic}</span>
              <span>${data.correct}/${data.total}</span>
            </div>
            <div class="t-progress">
              <div class="t-fill" style="width: ${pct}%; background: ${color};"></div>
            </div>
          </div>
        `;
        els.topicStats.innerHTML += html;
      }

      if (weakTopics.length > 0) {
        els.rec.textContent = `You're doing great! Try reviewing these topics to become a master: ${weakTopics.join(', ')}.`;
      } else {
        els.rec.textContent = "Amazing! You have mastered all the topics. You are ready to be an AI Ambassador!";
      }
    }

    els.genBtn.onclick = () => {
      const name = els.nameInp.value.trim() || "Young Learner";
      generateCertificate(name);
    };

    function generateCertificate(name) {
      const ctx = els.canvas.getContext('2d');
      const w = els.canvas.width;
      const h = els.canvas.height;

      // Background
      ctx.fillStyle = "#fff";
      ctx.fillRect(0, 0, w, h);

      // Border
      ctx.lineWidth = 20;
      ctx.strokeStyle = "#6c63ff";
      ctx.strokeRect(10, 10, w - 20, h - 20);

      // Inner Border
      ctx.lineWidth = 5;
      ctx.strokeStyle = "#ffb703";
      ctx.strokeRect(30, 30, w - 60, h - 60);

      // Title
      ctx.fillStyle = "#2b2bff";
      ctx.font = "bold 60px Nunito";
      ctx.textAlign = "center";
      ctx.fillText("Certificate of Achievement", w / 2, 150);

      // Subtitle
      ctx.fillStyle = "#555";
      ctx.font = "30px Inter";
      ctx.fillText("This certifies that", w / 2, 220);

      // Name
      ctx.fillStyle = "#000";
      ctx.font = "bold italic 80px Nunito";
      ctx.fillText(name, w / 2, 320);

      // Description
      ctx.fillStyle = "#555";
      ctx.font = "30px Inter";
      ctx.fillText("Has successfully mastered the", w / 2, 400);
      ctx.fillText("AI Alphabet for Young Readers", w / 2, 450);

      // Date & Score
      const date = new Date().toLocaleDateString();
      ctx.font = "20px Inter";
      ctx.fillStyle = "#888";
      ctx.fillText(`Awarded on ${date} ‚Ä¢ Score: ${score}/15`, w / 2, 530);

      // Convert to Image
      const dataUrl = els.canvas.toDataURL('image/png');
      els.img.src = dataUrl;
      els.dlLink.href = dataUrl;

      els.certForm.classList.add('hidden');
      els.certDisplay.classList.remove('hidden');
      confetti({ particleCount: 300, spread: 120, origin: { y: 0.6 } });
    }

    init();
  </script>
</body>

</html>